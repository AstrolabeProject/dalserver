<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.7.0_211) on Tue Jun 18 13:18:48 MST 2019 -->
<title>TapSchema</title>
<meta name="date" content="2019-06-18">
<link rel="stylesheet" type="text/css" href="../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TapSchema";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../dalserver/tap/TapQueryRunner.html" title="class in dalserver.tap"><span class="strong">Prev Class</span></a></li>
<li><a href="../../dalserver/tap/TapSchemaDS.html" title="class in dalserver.tap"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?dalserver/tap/TapSchema.html" target="_top">Frames</a></li>
<li><a href="TapSchema.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">dalserver.tap</div>
<h2 title="Class TapSchema" class="title">Class TapSchema</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>dalserver.tap.TapSchema</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">TapSchema</span>
extends java.lang.Object</pre>
<div class="block">This class provides methods to create and populate a TAP_SCHEMA instance.
 An input table or set of tables are read, automatically populating the
 contents of the TAP_SCHEMA tables.  A command line application for
 generating the TAP_SHEMA is also provided.

 Note, this is different from the OpenCADC TapSchema classes, that are
 used to read the TAP schema at runtime to execute a query.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../dalserver/tap/TapSchema.html#TapSchema()">TapSchema</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/tap/TapSchema.html#addTable(java.lang.String,%20java.lang.String)">addTable</a></strong>(java.lang.String&nbsp;schemaName,
        java.lang.String&nbsp;tableName)</code>
<div class="block">Add a single table into the active TAP_SCHEMA.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/tap/TapSchema.html#addTable(java.lang.String,%20java.lang.String,%20java.lang.String,%20java.lang.String)">addTable</a></strong>(java.lang.String&nbsp;schemaName,
        java.lang.String&nbsp;tableName,
        java.lang.String&nbsp;desc,
        java.lang.String&nbsp;utype)</code>
<div class="block">Add a single table into the active TAP_SCHEMA.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/tap/TapSchema.html#addTables(java.lang.String,%20java.lang.String[])">addTables</a></strong>(java.lang.String&nbsp;schemaName,
         java.lang.String[]&nbsp;tableSet)</code>
<div class="block">Add a list of tables into the active TAP_SCHEMA.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/tap/TapSchema.html#createTapSchema()">createTapSchema</a></strong>()</code>
<div class="block">Create a new, empty TAP_SCHEMA within the currently configured
 DataSource.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/tap/TapSchema.html#main(java.lang.String[])">main</a></strong>(java.lang.String[]&nbsp;args)</code>
<div class="block">TAP_SCHEMA administration utility.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/tap/TapSchema.html#setDataSource(javax.sql.DataSource)">setDataSource</a></strong>(javax.sql.DataSource&nbsp;ds)</code>
<div class="block">Set the DataSource used both to read data tables and to create and
 populate TAP_SCHEMA tables.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/tap/TapSchema.html#setTapSchema(java.lang.String)">setTapSchema</a></strong>(java.lang.String&nbsp;tapSchemaName)</code>
<div class="block">Set the name of the database schema to be used for the TAP_SCHEMA
 tables.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../dalserver/tap/TapSchema.html#TapSchema()">TapSchema</a></strong>()</code>
<div class="block">No-arg constructor.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TapSchema()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TapSchema</h4>
<pre>public&nbsp;TapSchema()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="TapSchema()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TapSchema</h4>
<pre>public&nbsp;void&nbsp;TapSchema()</pre>
<div class="block">No-arg constructor.</div>
</li>
</ul>
<a name="setDataSource(javax.sql.DataSource)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDataSource</h4>
<pre>public&nbsp;void&nbsp;setDataSource(javax.sql.DataSource&nbsp;ds)</pre>
<div class="block">Set the DataSource used both to read data tables and to create and
 populate TAP_SCHEMA tables.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>ds</code> - The DataSource to be used</dd></dl>
</li>
</ul>
<a name="setTapSchema(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setTapSchema</h4>
<pre>public&nbsp;void&nbsp;setTapSchema(java.lang.String&nbsp;tapSchemaName)</pre>
<div class="block">Set the name of the database schema to be used for the TAP_SCHEMA
 tables.  The default is the VO standard value "tap_schema", however
 other non-standad schema names may be used.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>schemaName</code> - The name of the schema to be used</dd></dl>
</li>
</ul>
<a name="createTapSchema()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTapSchema</h4>
<pre>public&nbsp;void&nbsp;createTapSchema()</pre>
<div class="block">Create a new, empty TAP_SCHEMA within the currently configured
 DataSource.</div>
</li>
</ul>
<a name="addTables(java.lang.String, java.lang.String[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTables</h4>
<pre>public&nbsp;void&nbsp;addTables(java.lang.String&nbsp;schemaName,
             java.lang.String[]&nbsp;tableSet)
               throws java.sql.SQLException</pre>
<div class="block">Add a list of tables into the active TAP_SCHEMA.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>schemaName</code> - The schema containing the tables</dd><dd><code>tableSet</code> - The list of tables to be added

 The given list of tables are added to the currently active
 TAP_SCHEMA.  The listed tables must be present in the schema
 schemaName.  Tables in multiple different schemas may be
 added by making multiple calls.  The TAP schema must already
 have been created, but need not be empty.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd></dl>
</li>
</ul>
<a name="addTable(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTable</h4>
<pre>public&nbsp;void&nbsp;addTable(java.lang.String&nbsp;schemaName,
            java.lang.String&nbsp;tableName)
              throws java.sql.SQLException</pre>
<div class="block">Add a single table into the active TAP_SCHEMA.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>schemaName</code> - The schema containing the tables</dd><dd><code>tableName</code> - The name of the table to be added

 The given table is added to the currently active TAP_SCHEMA.
 The table to be added may belong to any schema (including the
 TAP_SCHEMA itself) accessible via the currently active DataSource.
 The TAP schema must already have been created, but need not be empty.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd></dl>
</li>
</ul>
<a name="addTable(java.lang.String, java.lang.String, java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addTable</h4>
<pre>public&nbsp;void&nbsp;addTable(java.lang.String&nbsp;schemaName,
            java.lang.String&nbsp;tableName,
            java.lang.String&nbsp;desc,
            java.lang.String&nbsp;utype)
              throws java.sql.SQLException</pre>
<div class="block">Add a single table into the active TAP_SCHEMA.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>schemaName</code> - The schema containing the tables</dd><dd><code>tableName</code> - The name of the table to be added</dd><dd><code>description</code> - A brief description of the table</dd><dd><code>utype</code> - The VO Utype for the table

 The given table is added to the currently active TAP_SCHEMA.
 The table to be added may belong to any schema (including the
 TAP_SCHEMA itself) accessible via the currently active DataSource.
 The TAP schema must already have been created, but need not be empty.

 A table may be updated after being added by repeating the addTable
 (or addTableSet).  This will add any new columns that have been added
 to the table since it was originally added to the TAP_SCHEMA.  Metadata
 for existing columns however, is not modified, to avoid losing any
 custom edits made externally.  In general, the TAP_SCHEMA tables may
 be manually edited to add additional schema metadata, without losing
 these edits if new tables or table columns are added to the schema.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.sql.SQLException</code></dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(java.lang.String[]&nbsp;args)</pre>
<div class="block">TAP_SCHEMA administration utility.  Run this from the Java command line
 to create a new TAP_SCHEMA and add or update the metadata for tables
 described in the schema.

   java TapSchema
          -d                    The DataSource to be used
          -c                    Create a new empty TAP_SCHEMA
          -s                    Schema containing the data tables
          -a table              Add a table to the TAP_SCHEMA
          -t table [table...]   Add a tableSet to the TAP_SCHEMA

 All reference tables must be present in the given schema, but multiple
 invocations may be made to index tables from multiple schemas.  If a
 table is already present in the TAP schema, any new columns will be
 found and added to the schema.

 A DataSource is used to connect to the DBMS.  The DataSource can be
 obtained via JNDI lookup (when running a context such as Tomcat) or
 can be created from JDBC connection parameters read from a file (when
 running Java from the command line).  Which type of DataSource to use
 is determined by the syntax of the "datasource" parameter.  For a
 JNDI lookup merely specify the JNDI name of the object, e.g.,
 "jdbc/tapuser".  To dynamically create a DataSource from connection
 parameters stored in a Java properties file, use "file:<path>".</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../index-all.html">Index</a></li>
<li><a href="../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../dalserver/tap/TapQueryRunner.html" title="class in dalserver.tap"><span class="strong">Prev Class</span></a></li>
<li><a href="../../dalserver/tap/TapSchemaDS.html" title="class in dalserver.tap"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../index.html?dalserver/tap/TapSchema.html" target="_top">Frames</a></li>
<li><a href="TapSchema.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
