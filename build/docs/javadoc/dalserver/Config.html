<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.7.0_211) on Tue Jun 18 13:18:43 MST 2019 -->
<title>Config</title>
<meta name="date" content="2019-06-18">
<link rel="stylesheet" type="text/css" href="../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="Config";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../dalserver/ConfigField.html" title="class in dalserver"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?dalserver/Config.html" target="_top">Frames</a></li>
<li><a href="Config.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">dalserver</div>
<h2 title="Class Config" class="title">Class Config</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>HttpServlet</li>
<li>
<ul class="inheritance">
<li>dalserver.Config</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">Config</span>
extends HttpServlet</pre>
<div class="block">The Config class manages the DALServer Web-app local configuration,
 including global framework configuration, and configuration of all
 locally defined services.

 The DALServer Web-app is packaged as a single WAR file containing
 generic framework code for all supported VO services.  A configured
 instance of the Web-app may support any number of services, each of
 which consists of one or more servlets, each serving a distinct HTTP
 endpoint or set of endpoints/resources.  The DALServer Web-app is fully
 data-driven; all configuration data and all served data content is stored
 externally to the deployed Web-app, and the Web-app does not have to be
 rebuilt to add new service instances.

 The Config class allows all service configuration info to be expressed
 concisely in simple text files, describing the configuration of the
 framework at a particular site.  Since all configuration data is stored
 separately from the Web-app a single framework WAR file can be prepared and
 used unchanged regardless of the local configuration.  The DALServer WAR
 can be updated to a new version with no effect on the local configuration.

 When the configuration is reloaded, the Config class reads the
 configuration files stored in an external directory, and updates the
 web.xml file used internally to define the Web-app runtime configuration.
 Some configuration data may also be written to runtime resource files
 (e.g., Java property files or custom class files) stored in the deployed
 Web-app.  All configuration information is cached in the web.xml and
 resource files where it remains unchanged until the configuration is
 subsequently reloaded.

 Various techniques are possible to trigger a configuration reload.
 The recommended technique is to invoke the "reload" servlet.  A password
 may be configured to limit reload permission to a service administrator.

 A root configuration file ("server.conf" by default) is read to reload
 the configuration.  The root configuration file defines the Web-app, and
 global context parameters shared by all services.  It also lists all
 services and global parameter sets to be included in the configuration.
 Each of these is defined in a separate file.  As the configuration is
 loaded the configuration mechanism processes all active, directly or
 indirectly referenced configuration files, starting with the root
 configuration file.

 The structure of a service configuration file is as follows:

        [service]
          service-wide config parameters

        [servlet]
          servlet definition parameters
        [init-params]
          servlet initialization parameters
              ...
        [servlet]             # optional
          servlet definition parameters
        [init-params]
          servlet initialization parameters

        [servlet-mapping]
        [servlet-mapping]
              ...

 Both Web-app context parameters and servlet init parameters may be used
 to pass parameters to servlet code.  However, services (e.g. TAP) that
 use external class libraries may not provide called classes access to
 parameters passed in this way.  In such a case, or whenever WebApp-wide
 named global parameter sets are required, the Java property file mechanism
 may be used instead to pass global parameters to service code.  Java
 property file psets may be used to pass parameters to either service code,
 or globally to any code that recognizes the pset by name.  The DALServer
 parameter set subsystem allows either approach to be used, transparent to
 the service code.

 Parameters defined in the [service] context of a service configuration are
 represented via Java property files that can be read directly by the
 DALServer parameter mechanism, hence reliably passed whether not the
 application has access to the servlet definition and init parameters.
 These parameters are local to the service and may be accessed transparently
 by the service.  Native DALServer services can also read parameters
 defined as Web-app context-params or servlet init-params.  Which form of
 parameter is used to configure a service is transparent to the service code.

 The scope of global parameter sets is the entire Web application.  The
 parameter set name must be unique within the scope of the Web-app (but may
 be a pathname relative to the Web-app root "classes" directory).  Service
 code must know the name of a global pset to be able to access it, however
 the name of a global pset to be used by a service instance can be passed
 as a service parameter.

 This version of the Config class was modified from the original to
 support multiple servlets per service, and the optional use of Java
 property files to pass configuration parameters.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../dalserver/Config.html#Config()">Config</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../dalserver/Config.html#compile(java.io.PrintWriter,%20java.lang.String,%20dalserver.ParamSet)">compile</a></strong>(java.io.PrintWriter&nbsp;out,
       java.lang.String&nbsp;config,
       <a href="../dalserver/ParamSet.html" title="class in dalserver">ParamSet</a>&nbsp;entityList)</code>
<div class="block">Compile the current framework configuration in web.xml format.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../dalserver/Config.html#destroy()">destroy</a></strong>()</code>
<div class="block">Servlet shutdown.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../dalserver/Config.html#doGet(HttpServletRequest,%20HttpServletResponse)">doGet</a></strong>(HttpServletRequest&nbsp;request,
     HttpServletResponse&nbsp;response)</code>
<div class="block">Handle a GET or POST request.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>java.lang.String</code></td>
<td class="colLast"><code><strong><a href="../dalserver/Config.html#getServletInfo()">getServletInfo</a></strong>()</code>
<div class="block">Return a brief description of the service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../dalserver/Config.html#init(ServletConfig)">init</a></strong>(ServletConfig&nbsp;config)</code>
<div class="block">Servlet startup and initialization.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../dalserver/Config.html#parseIni(java.lang.String,%20java.util.ArrayList)">parseIni</a></strong>(java.lang.String&nbsp;config,
        java.util.ArrayList&lt;<a href="../dalserver/ParamSet.html" title="class in dalserver">ParamSet</a>&gt;&nbsp;psetList)</code>
<div class="block">Parse a config file in INI Format.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../dalserver/Config.html#reload(dalserver.ParamSet,%20HttpServletResponse,%20dalserver.ParamSet)">reload</a></strong>(<a href="../dalserver/ParamSet.html" title="class in dalserver">ParamSet</a>&nbsp;params,
      HttpServletResponse&nbsp;response,
      <a href="../dalserver/ParamSet.html" title="class in dalserver">ParamSet</a>&nbsp;entityList)</code>
<div class="block">Reload the current framework configuration.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="Config()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>Config</h4>
<pre>public&nbsp;Config()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="init(ServletConfig)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init(ServletConfig&nbsp;config)
          throws ServletException</pre>
<div class="block">Servlet startup and initialization.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>ServletException</code></dd></dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;destroy()</pre>
<div class="block">Servlet shutdown.</div>
</li>
</ul>
<a name="getServletInfo()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServletInfo</h4>
<pre>public&nbsp;java.lang.String&nbsp;getServletInfo()</pre>
<div class="block">Return a brief description of the service.</div>
</li>
</ul>
<a name="doGet(HttpServletRequest, HttpServletResponse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>doGet</h4>
<pre>public&nbsp;void&nbsp;doGet(HttpServletRequest&nbsp;request,
         HttpServletResponse&nbsp;response)
           throws ServletException,
                  java.io.IOException</pre>
<div class="block">Handle a GET or POST request.  Includes all operations for the
 given service or servlet (config reload in this case).</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code>ServletException</code></dd>
<dd><code>java.io.IOException</code></dd></dl>
</li>
</ul>
<a name="reload(dalserver.ParamSet, HttpServletResponse, dalserver.ParamSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reload</h4>
<pre>public&nbsp;int&nbsp;reload(<a href="../dalserver/ParamSet.html" title="class in dalserver">ParamSet</a>&nbsp;params,
         HttpServletResponse&nbsp;response,
         <a href="../dalserver/ParamSet.html" title="class in dalserver">ParamSet</a>&nbsp;entityList)
           throws <a href="../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a>,
                  ServletException</pre>
<div class="block">Reload the current framework configuration.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>params</code> - Parameter set for HTTP reload request</dd><dd><code>response</code> - Response context</dd><dd><code>entityList</code> - Receives list of created entities

 The root input configuration file is read, along with any files
 it references, and a Web-app file (web.xml) is generated and
 written to the deployed Web-app, along with any runtime property
 files defined by the configuration.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></code></dd>
<dd><code>ServletException</code></dd></dl>
</li>
</ul>
<a name="compile(java.io.PrintWriter, java.lang.String, dalserver.ParamSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compile</h4>
<pre>public&nbsp;int&nbsp;compile(java.io.PrintWriter&nbsp;out,
          java.lang.String&nbsp;config,
          <a href="../dalserver/ParamSet.html" title="class in dalserver">ParamSet</a>&nbsp;entityList)
            throws <a href="../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></pre>
<div class="block">Compile the current framework configuration in web.xml format.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - Output stream</dd><dd><code>config</code> - Root input configuration file</dd><dd><code>entityList</code> - Paramset describing the entities

 The root input configuration file is read, along with any files
 it references, and the content for a Web-app definition file (web.xml)
 is generated and written to the output stream.  The number of entities
 (services, servlets, or property files) processed is returned as the
 function value, and a description of each entities created is written
 to the entityList pset.  Only the web.xml content is generated here;
 output of any Java property files happens elsewhere.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></code></dd></dl>
</li>
</ul>
<a name="parseIni(java.lang.String, java.util.ArrayList)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>parseIni</h4>
<pre>public&nbsp;int&nbsp;parseIni(java.lang.String&nbsp;config,
           java.util.ArrayList&lt;<a href="../dalserver/ParamSet.html" title="class in dalserver">ParamSet</a>&gt;&nbsp;psetList)
             throws java.io.FileNotFoundException,
                    <a href="../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></pre>
<div class="block">Parse a config file in INI Format.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>config</code> - Input config file in INI Format</dd><dd><code>psetList</code> - List of named psets for output

 The input config file is parsed, and the content returned in the form
 of zero or more ParamSet objects, one ParamSet per INI context, that
 are added to the provided pset arrayList.  The number of psets output
 is returned.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>java.io.FileNotFoundException</code></dd>
<dd><code><a href="../dalserver/DalServerException.html" title="class in dalserver">DalServerException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../deprecated-list.html">Deprecated</a></li>
<li><a href="../index-all.html">Index</a></li>
<li><a href="../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../dalserver/ConfigField.html" title="class in dalserver"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../index.html?dalserver/Config.html" target="_top">Frames</a></li>
<li><a href="Config.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
